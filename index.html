<script>
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('sw.js');
    }

    function openModal() {
        document.getElementById('paymentModal').classList.add('active');
    }

    function closeModal() {
        document.getElementById('paymentModal').classList.remove('active');
    }

    document.getElementById('paymentModal').addEventListener('click', function(e) {
        if (e.target === this) closeModal();
    });

    document.getElementById('paymentForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        var email = document.getElementById('email').value;
        var name = document.getElementById('name').value;

        var handler = PaystackPop.setup({
            key: 'pk_live_18794be9809d543f92489b74092f937800df5aa8',
            email: email,
            amount: 1600000,
            currency: 'NGN',
            ref: 'MZ_' + Date.now(),
            callback: function(response) {
                localStorage.setItem('mzone_subscribed', 'true');
                window.location.href = 'dashboard.html?status=success&ref=' + response.reference;
            },
            onClose: function() {
                alert('Payment cancelled');
            }
        });

        handler.openIframe();
    });
</script
